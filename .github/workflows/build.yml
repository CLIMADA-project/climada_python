name: build

on: [push, pull_request]

jobs:
  docker-build:
    uses: ./.github/workflows/docker.yml
    secrets: inherit
    with:
      new_image: ${{ github.event.created }}

  tests:
    needs: docker-build
    uses: ./.github/workflows/test.yml
    with:
      test_types: unit-test,data-test,notebook-test,install-test
